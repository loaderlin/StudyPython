v-bind 及 class 与 style 绑定

:class 可以与普通class共存

当:class 的表达式过长或逻辑复杂时，还可以绑定一个计算属性

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Vue 示例</title>
</head>
<body>
    <div id="app">
        <div  class='static' :class="{ 'active' : isActive , 'error' : isError } "></div>
        <div  :class="classes"></div>
    </div>

    <script src="https://unpkg.com/vue/dist/vue.min.js" ></script>
    <script>
        new Vue({
            el:　'#app',
            data:{
                isActive: true,
                isError: false,
                // error: false,
                // error: null,
                error: {
                    type: 'fail'
                }
            },
            computed: {
                classes: function () {
                    return {
                        active: this.isActive && !this.error,
                        'text-fail': this.error && this.error.type === 'fail'
                    } 
                }
            }
        })
    </script>
</body>
</html>
```

数组语法

需要应用多个Class时，可以使用数组语法，给:class绑定一个数组，应用一个class列表

三元表达式来根据条件切换class
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Vue 示例</title>
</head>
<body>
    <div id="app">
        <div :class="[activeCls, errorCls]"> </div>
        <div :class="[isActive ? activeCls : '' , errorCls]"> </div>
        <div :class="[{'active' : isActive }, errorCls]"> </div>
    </div>

    <script src="https://unpkg.com/vue/dist/vue.min.js" ></script>
    <script>
        var  app = new Vue({
            el:　'#app',
            data:{
                isActive: true,
                activeCls: 'active',
                errorCls: 'error'
            }
        })
    </script>
</body>
</html>
```

绑定内联样式

```html
<div :style="{'color': color, 'fontSize': fontSize + 'px' }"> 文本 </div>
<div :style="styles"> 文本 </div>

<script>
var app = new Vue({
    el: '#app',
    data: {
        color: 'red',
        fontSize: 14,
        styles: {
            color: 'red',
            fontSize: 14 + 'px',
        }
    },
})
</script>
```

### 内置指令

#### v-clock 

1. 它会在Vue实例结束编译时从绑定的HTML元素上移除，经常和CSS的display:none;配合使用
2. v-clock 是一个解决初始化慢导致页面闪动的最佳实践

#### v-once

定义它的组件或元素只渲染一次，包括元素或组件的所有子节点。首次渲染后，不再随着数据的变化而重新渲染，将视为静态内容

```js
<div id="app" v-clock>
    <span v-once>{{ message }}</span>
</div>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            message : 'hello world'
        }
    })
</script>
```

### 条件渲染指令

- v-if v-else-if v-else 

复用已有的元素而非重新渲染
- v-show

改变元素CSS属性display
v-show不能在<template>上使用

```html
<div id="app">
    <span v-if="status == 1">状态为1时 显示这段话</span>
    <span v-else-if="status == 2">状态为2时 显示这段话</span>
    <span v-else>其他情况 显示这段话</span>

    <template v-if="type == 'name'">
        <label for="" >your name</label>
        <input type="text" placeholder="你的名字" key="name-input" />
    </template>    
    <template v-else>
        <label for="" >your Email</label>
        <input type="text" placeholder="你的邮箱" key="email-input"/>
    </template>    
    <button @click="handleToggleClick">切换输入类型</button>
</div>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            status: 1,
            type: 'name',
        },
        methods: {
            handleToggleClick: function() {
                this.type = this.type === 'name' ? 'mail' : 'name';
            }
        }
    })
</script>
```

给俩个<input>元素都增加key后，就不会复用，切换类型时输入的内容也会被删除。


列表渲染指令v-for

<li v-for='(book, index) in books'>{{ index }} - {{ book.name }}</li>

计算属性

Setter Getter

```html
<div id="app">
    <span >{{ text.split(',').reverse().join(',') }}</span>
    <span >{{ reversedText }}</span>
    <hr/>
    <p>你的名字 {{fullName}}</p>
</div>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            text: '123,456',
            firstName: 'Jack',
            lastName: 'Green'
        },
        computed: {
            reversedText: function () {
                //这里的this指向的是当前的Vue实例
                return this.text.split(',').reverse().join(',')
            },
            fullName: {
                // getter 用于读取
                get: function () {
                    return this.firstName + ' ' + this.lastName; 
                },
                // 写入时触发
                set: function (newValue) {
                    var names = newValue.split(' ');
                    this.firstName = names[0];
                    this.lastName = names[names.length - 1];
                }
            }
        },

    })
</script>
```

计算属性缓存

计算属性是基于它的依赖缓存的。一个计算属性所依赖的数据发生变化时，它才会重新取值，所以text只要不改变，计算属性也就不更新

遍历大数组和做大量计算时，应当使用计算属性，除非你不希望得到缓存。
```html
<div id="app">
    <span >{{ text.split(',').reverse().join(',') }}</span>
    <span >{{ reversedText }}</span>
    <!-- 注意，不使用计算属性时，在方法中定义要带() -->
    <span >{{ reversedTextNumber() }}</span>
</div>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            text: '123,456',
        },
        methods: {
            reversedTextNumber: function () {
                //这里的this指向的是当前的Vue实例
                return this.text.split(',').reverse().join(',')
            }
        },
        computed: {
            reversedText: function () {
                //这里的this指向的是当前的Vue实例
                return this.text.split(',').reverse().join(',')
            }
        },
    })
</script>
```
